<header class="fixed-top d-flex align-items-center justify-content-between px-3">
  <div class="d-flex align-items-center">
    <button class="custom-toggle" (click)="toggleMenu()"><i class="fa-solid fa-bars"></i></button>
    <ul class="nav custom-menu" [class.menu]="true" [class.visible-menu]="openMenu">
      <li><a class="nav-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }">Inicio</a></li>
      <li><a class="nav-link" routerLink="/biography" routerLinkActive="active-link">Biografía</a></li>
      <li><a class="nav-link" routerLink="/music" routerLinkActive="active-link">Música</a></li>
      <li><a class="nav-link" routerLink="/videos" routerLinkActive="active-link">Videos</a></li>
      <li><a class="nav-link" routerLink="/tour" routerLinkActive="active-link">Tour</a></li>
      <li><a class="nav-link" routerLink="/contact" routerLinkActive="active-link">Contacto</a></li>
      <li><a class="nav-link" routerLink="/contest" routerLinkActive="active-link">Concursos</a></li>
      <li><a class="nav-link" routerLink="/merchandising" routerLinkActive="active-link">Merchandising</a></li>
    </ul>
  </div>
  <div class="d-md-block mx-auto">
    <img class="logo-dani" src="assets/header/logo-dani.png" alt="Dani J">
  </div>
  <div class="d-flex align-items-center gap-3 pe-3">
    <div class="dropdown">
      <button class="btn dropdown-toggle border-0 p-0 bg-transparent" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <img class="flag" [src]="'assets/header/' + currentLanguaje + '-flag.png'" [alt]="currentLanguaje.toUpperCase()" />
      </button>
      <ul class="dropdown-menu custom-dropdown">
        <li><a class="dropdown-item d-flex align-items-center gap-2" href="#" (click)="changeLanguaje('es'); $event.preventDefault()">
            <img class="flag" src="assets/header/es-flag.png" alt="ES" /> Español</a></li>
        <li><a class="dropdown-item d-flex align-items-center gap-2" href="#" (click)="changeLanguaje('en'); $event.preventDefault()">
            <img class="flag" src="assets/header/en-flag.png" alt="EN" /> English</a></li>
        <li><a class="dropdown-item d-flex align-items-center gap-2" href="#" (click)="changeLanguaje('it'); $event.preventDefault()">
            <img class="flag" src="assets/header/it-flag.png" alt="IT" /> Italiano</a></li>
      </ul>
    </div>
    <ng-container *ngIf="!loggedUser; else loggedInUser">
      <button class="btn custom-btn" data-bs-toggle="modal" data-bs-target="#login-modal">Iniciar Sesión</button>
    </ng-container>
    <ng-template #loggedInUser>
      <div class="dropdown">
        <button class="btn dropdown-toggle bg-transparent border-0 p-0" data-bs-toggle="dropdown">
          <img class="user-icon" [src]="loggedUser?.avatar || 'assets/header/user-icon.png'" alt="Avatar" />
        </button>
        <ul class="dropdown-menu custom-dropdown text-center">
          <li><a class="dropdown-item" routerLink="/profile">Perfil</a></li>
          <li><a class="dropdown-item" (click)="logout()">Cerrar Sesión</a></li>
        </ul>
      </div>
    </ng-template>
    <ng-container *ngIf="loggedUser; else cartLoginModal">
      <a class="nav-link" routerLink="/cart">
        <img class="cart-icon" src="assets/header/cart-icon.png" alt="Cart Icon" />
      </a>
    </ng-container>
    <ng-template #cartLoginModal>
      <button class="nav-link btn btn-link p-0" data-bs-toggle="modal" data-bs-target="#login-modal" title="Debes iniciar sesión para ver tu cesta">
        <img class="cart-icon" src="assets/header/cart-icon.png" alt="Cart Icon" />
      </button>
    </ng-template>
  </div>
</header>
